<script src="https://code.jquery.com/jquery-3.6.4.slim.min.js" integrity="sha256-a2yjHM4jnF9f54xUQakjZGaqYs/V1CYvWpoqZzC2/Bw=" crossorigin="anonymous"></script>


<div id="table">

<table id="table_id" class="display" style="width:100%">
        <thead>
            <tr>
                <th>Quiz start time</th>
                <th>Complete?
                <th>Steps completed
                <th>View answers 
                <th>Delete response?
                
                </th>
            </tr>
        </thead>
        <tbody id="response_rows">
            {% load tz %}
            {% for r in responses %}
            <tr>
                <td>{{r.time_added|localtime}} {% get_current_timezone as TIME_ZONE %} ({{TIME_ZONE}})</td>
                <td>
                    {% if r.completed %}
                    <i style="display:none">C</i>
                    <i class="fa fa-check text-green"></i>
                    {% else %}
                    <i style="display:none">T</i>
                    <i class="fa fa-ban text-red"></i>
                    {% endif %}
                    
                </td>
                <td>{{r.steps_completed}}</td>
                <td>
                    <a target="_blank" href="{% url 'detailed_results' r.quiz.id r.response_id %}">
                        View <i class="fa fa-eye"></i>
                    </a>
                
                </td>
                <td>
                    <a type="button" 
                    hx-delete="{% url 'delete_response' r.quiz.id r.response_id %}"
                    hx-confirm="Are you sure you want to delete response with id: {{r.response_id}}"
                    hx-target="#table"
                    >
                        Delete <i class="fa fa-trash text-red"></i>
                    </a>
                    
        
                </td>
            </tr>
            {% endfor %}
        
        </tbody>
        
    </table> 


<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.js"></script>

<script>
    window.$('#table_id').dataTable( {
        "order": [[ 0, 'desc' ],]
    } );
    
{% if deleted %}

location.reload();


{% endif %}

</script>

</div>


